+name: Codex → GitHub 자동업데이트

+on:
+  workflow_dispatch:   # 이 설정 하나로, "Actions" 탭에서 'Run workflow' 버튼으로 언제든 수동 실행 가능

+jobs:
   update-code:
     runs-on: ubuntu-latest
     steps:
       - uses: actions/checkout@v3
       - name: Codex로 코드 생성
         run: |
           curl https://api.openai.com/v1/completions \
             -H "Authorization: Bearer ${{ secrets.OPENAI_API_KEY }}" \
             -H "Content-Type: application/json" \
             -d '{
                   "model": "code-davinci-002",
                   "prompt": "여기에 실행하고 싶은 작업을 한두 문장으로 적으세요",
                   "max_tokens": 500
                 }' \
             > generated.txt
       - name: 파일 정리
         run: |
           mv generated.txt src/new_code.js || true
       - name: 변경 커밋 & 푸시
         run: |
           git config user.name "github-actions[bot]"
           git config user.email "github-actions[bot]@users.noreply.github.com"
           git add .
           git diff --quiet && echo "변경 없음" || git commit -m "자동 업데이트: Codex 생성 코드"
           git push
